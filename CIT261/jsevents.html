<!DOCTYPE HTML>
<html lang="en-US">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
        <link rel="stylesheet" href="styles/main.css">
        <link rel="stylesheet" href="styles/transforms.css">
        <meta name="description" content="HTML5 Tags">
        <link rel="stylesheet" href="styles/jsevents.css">
    </head>
    <body>
        <h2>Standard JavaScript Events Including those for Mobile Devices</h2>
        <h3>How Strong Is Your Password?</h3>
        <div class="passwordValidation">
            <form onsubmit="submitAlert()" action="#">
                <label><span>Password: </span><input type="password" id="psw" name="psw" required></label>
                <input type="submit" value="Submit">
            

        <canvas id="passwordCanvas" height="10px"></canvas>
        <div id="message">
          <h3>Password must contain the following:</h3>
            <ul>
                <li id="letter">A lowercase letter</li>
                <li id="capital">A capital (uppercase) letter</li>
                <li id="numbers">A number</li>
                <li id="special">A special character</li>
                <li id="length">Minimum 8 characters (The longer, the stronger)</li>
            </ul>
        </div>
        </form>
        </div>
        <script>
            var myPassword = document.getElementById("psw");        
            var canvas = document.getElementById("passwordCanvas");
            var ctx = canvas.getContext("2d");
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = "red";
            ctx.fillRect(0, 0, 320, 10);
            var securityScore = 0;

            myPassword.onfocus = function() {
                document.getElementById("message").style.display = "block";
                document.getElementById("passwordCanvas").style.display = "block";
            }

            myPassword.onblur = function() {
                document.getElementById("message").style.display = "block";
                document.getElementById("passwordCanvas").style.display = "block";
            }
            
            myPassword.onkeyup = function() {
                var lowerCase = /[a-z]/g;
                if(myPassword.value.match(lowerCase)) {
                    var lowCaseScore = .5;
                    document.getElementById("letter").style.color = "#4CAF50";
                }else {
                    var lowCaseScore = 0;
                }
                
                var upperCase = /[A-Z]/g;
                if(myPassword.value.match(upperCase)) {
                    var upperCaseScore = .5;
                    document.getElementById("capital").style.color = "#4CAF50";
                }else {
                    var upperCaseScore = 0;
                }
                
                var specialCharacter = /[!@#\$%\^\&*\)\(+=._-]+/g;
                if(myPassword.value.match(specialCharacter)) {
                    var specialScore = .5;
                    document.getElementById("special").style.color = "#4CAF50";
                }else {
                    var specialScore = 0;
                }
                
                var numberCheck = /[0-9]/g;
                if(myPassword.value.match(numberCheck)) {
                    var numberScore = .5;
                    document.getElementById("numbers").style.color = "#4CAF50";
                }else {
                    var numberScore = 0;
                }
                
                if(myPassword.value.length >= 15) {
                    var lengthScore = 2.5
                    document.getElementById("length").style.color = "#4CAF50";
                }   else if (myPassword.value.length >= 12 ) {
                    var lengthScore = 2;
                    document.getElementById("length").style.color = "#4CAF50";
                }   else if (myPassword.value.length >= 10 ) {
                    var lengthScore = 1.5;
                    document.getElementById("length").style.color = "#4CAF50";
                }   else if (myPassword.value.length >= 8 ) {
                    var lengthScore = 1;
                    document.getElementById("length").style.color = "#4CAF50";
                }   else {
                    var lengthScore = 0;
                }

                securityScore = lowCaseScore + upperCaseScore + numberScore + lengthScore + specialScore;
                console.log("se = " +securityScore);
                console.log("lo = " +lowCaseScore);
                console.log("up = " +upperCaseScore);
                console.log("nu = " +numberScore);
                console.log("le = " +lengthScore);
                console.log("sc = " + specialScore);
                
                if(securityScore == .5) {
                    ctx.fillStyle = "#4CAF50";
                    ctx.fillRect(0, 0, 40, 10);
                }
                
                if(securityScore == 1) {
                    ctx.fillStyle = "#4CAF50";
                    ctx.fillRect(0, 0, 80, 10);
                }

                if(securityScore == 1.5) {
                    ctx.fillStyle = "#4CAF50";
                    ctx.fillRect(0, 0, 120, 10);
                }
                
                if(securityScore == 2) {
                    ctx.fillStyle = "#4CAF50";
                    ctx.fillRect(0, 0, 160, 10);
                }
                
                if(securityScore == 2.5) {
                    ctx.fillStyle = "#4CAF50";
                    ctx.fillRect(0, 0, 200, 10);
                }
                
                if(securityScore == 3) {
                    ctx.fillStyle = "#4CAF50";
                    ctx.fillRect(0, 0, 240, 10);
                }
                
                if(securityScore == 3.5) {
                    ctx.fillStyle = "#4CAF50";
                    ctx.fillRect(0, 0, 280, 10);
                }
                
                if(securityScore > 4) {
                    ctx.fillStyle = "#4CAF50";
                    ctx.fillRect(0, 0, 320, 10);
                }
            }
            
            function submitAlert() {
                if(securityScore == 3.5) {
                    alert("You have submitted a MEDIUM strength password!!");
                }if(securityScore == 4) {
                    alert("You have submitted a STRONG password!!");
                }if(securityScore > 4) {
                    alert("You have submitted an EXTREMELY STRONG password!!");
                }if(securityScore < 3.5) {
                    alert("You have submitted a WEAK password. Please try again!");
                }
            }
            function clearFields() {
                location.reload();
            }
            function colorChange() {
                var myUserName = document.getElementById("testUserName").value;
                if(myUserName === "") {
                    document.getElementById("testUserName").style.backgroundColor = "#ffdde3";
                }
            }
        </script>
    </body>
</html>